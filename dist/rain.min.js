!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Rain={})}(this,(function(t){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,r)};function r(){for(var t=0,e=0,r=arguments.length;r>e;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;r>e;e++)for(var o=arguments[e],s=0,c=o.length;c>s;s++,i++)n[i]=o[s];return n}var n=function(t){return Array.isArray(t)?t:(t+"").replace(/\s+/g,"").split(",")},i=function(){function t(){this.instances={},this.bindings={},this.tags={},this.resolved={},this.extenders={}}return t.prototype.get=function(t){},t.prototype.has=function(t){return this.instances.hasOwnProperty(t)||this.bindings.hasOwnProperty(t)},t.prototype.instance=function(t,e){var r="function"==typeof e?e.call({}):e;return this.instances[t]=r,r},t.prototype.singleton=function(t,e){this.bind(t,e,!0)},t.prototype.bind=function(t,e,r){void 0===r&&(r=!1),delete this.instances[t],this.bindings[t]={factory:e,singleton:r},this.isResolved(t)&&this.rebound(t)},t.prototype.extend=function(t,e){t in this.instances?this.instances[t]=e(this.instances[t],this):(this.extenders.hasOwnProperty(t)||(this.extenders[t]=[]),this.extenders[t].push(e),this.isResolved(t)&&this.rebound(t))},t.prototype.tag=function(t,e){var r=this,n=[];if(e instanceof Array)n=e;else for(var i=1;arguments.length>i;i++)n[i-1]=arguments[i];n.forEach((function(e){e in r.tags||(r.tags[e]=[]),t instanceof Array?t.forEach((function(t){r.tags[e].push(t)})):r.tags[e].push(t)}))},t.prototype.make=function(t){for(var e=this,i=[],o=1;arguments.length>o;o++)i[o-1]=arguments[o];return new Promise((function(o,s){var c=n(t);try{e.resolve.apply(e,r([c,function(){if(Array.isArray(t)||c.length>1){for(var e=[],r=0;c.length>r;r++)e.push(arguments[r]);o(e)}else o(arguments[0])}],i))}catch(t){s(t)}}))},t.prototype.resolve=function(t,e,r){var i=this;void 0===r&&(r=[]);var o=n(t).map((function(t){if(t in i.instances)return i.instances[t];var e=i.build(t,r);return i.getExtenders(t).forEach((function(t){e=t(e,i)})),i.isSingleton(t)&&(i.instances[t]=e),i.resolved[t]=!0,e}));e.apply(null,o)},t.prototype.isResolved=function(t){return this.resolved.hasOwnProperty(t)||this.instances.hasOwnProperty(t)},t.prototype.isSingleton=function(t){return this.instances.hasOwnProperty(t)||!!this.bindings[t].singleton},t.prototype.destroy=function(){this.instances={},this.tags={},this.bindings={},this.resolved={},this.extenders={}},t.prototype.rebound=function(t){this.make(t)},t.prototype.build=function(t,e){if(void 0===e&&(e=[]),!this.bindings.hasOwnProperty(t))throw Error("Service "+t+" is not exists.");return this.bindings[t].factory.apply(null,e)},t.prototype.getExtenders=function(t){return this.extenders[t]||[]},t}(),o=function(){function t(){this.listeners={},this.sorted={}}return t.prototype.dispatch=function(t,e){(void 0===e&&(e=null),e in this.listeners)&&this.callListeners(this.listeners[e],e,t);return t},t.prototype.emit=function(t,e){return void 0===e&&(e=null),this.dispatch.apply(this,arguments)},t.prototype.on=function(t,e,r){return void 0===r&&(r=!1),this.addListener(t,e,r)},t.prototype.once=function(t,e){return this.addListener(t,e,!0)},t.prototype.off=function(t,e){return this.removeListener(t,e)},t.prototype.addListener=function(t,e,r){return void 0===r&&(r=!1),this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({listener:e,once:r}),this},t.prototype.removeListener=function(t,e){var r=this.listeners[t];if(r){var n=r.findIndex((function(t){return t.listener===e}));return-1!==n&&(r.length>1?this.listeners[t]=r.slice(0,n).concat(r.slice(n+1)):delete this.listeners[t]),this}},t.prototype.hasListeners=function(t){return t?this.listeners[t].length>0:!!Object.keys(this.listeners).find((function(t){return!!t}))},t.prototype.getListeners=function(t){var e=this;return t?this.listeners[t]?(this.sorted[t]||this.sortListeners(t),this.sorted[t]):[]:(Object.keys(this.listeners).forEach((function(t){e.sorted[t]||e.sortListeners(t)})),this.sorted)},t.prototype.sortListeners=function(t){for(var e,r=[],n=0,i=Object.keys(this.listeners).length;i>n;n++){e=this.listeners[t];for(var o=0;e.length>o;o++)r.push(e[o])}e=null,this.sorted[t]=r},t.prototype.callListeners=function(t,e,r){for(var n,i=0;t.length>i&&!r.isPropagationStopped();i++)(n=t[i]).once&&this.removeListener(e,n.listener),n.listener(r)},t}(),s=function(t){function r(e){void 0===e&&(e=!1);var r=t.call(this)||this;return r.serviceProviders=[],r.booted=!1,r.debug=!!e,r.dispatcher=new o,r.registerBaseServiceProvider(),r}return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(r,t),r.prototype.boot=function(){var t=this;return this.booted?Promise.resolve(!0):(this.resolveProviderRegister(),this.serviceProviders.forEach((function(e){t.bootProvider(e.provider)})),this.startTime=new Date,this.booted=!0,console.log((new Date).toLocaleTimeString(),"Kernel Booted"),Promise.resolve(!0))},r.prototype.register=function(t,e){void 0===e&&(e={});var r="object"==typeof t?t:new t(this,e.args);return this.serviceProviders.push({provider:r,options:e}),this.booted&&(r.register(),this.bootProvider(r)),r},r.prototype.destroy=function(){this.serviceProviders.forEach((function(t){return t.provider.destroy()})),this.serviceProviders=[],t.prototype.destroy.call(this)},r.prototype.isBooted=function(){return this.booted},r.prototype.registerBaseServiceProvider=function(){console.warn("registerBaseServerProvider method is deprecated.")},r.prototype.resolveProviderRegister=function(){this.serviceProviders.forEach((function(t){t.provider.register()}))},r.prototype.bootProvider=function(t){t.boot()},r.prototype.initBundles=function(){},r.VERSION="1.0.0",r.VERSION_ID=1e4,r}(i);Object.freeze(s);var c=function(){function t(t,e){void 0===e&&(e={}),this.kernel=t,this.options=e,this.kernel=t}return t.prototype.provides=function(){return[]},t.prototype.destroy=function(){this.kernel=null},t}();t.Kernel=s,t.ServiceProvider=c,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=rain.min.js.map
