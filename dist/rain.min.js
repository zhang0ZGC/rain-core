!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Rain={})}(this,(function(t){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,r)};function r(){for(var t=0,e=0,r=arguments.length;r>e;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;r>e;e++)for(var o=arguments[e],s=0,c=o.length;c>s;s++,i++)n[i]=o[s];return n}var n=function(t){return Array.isArray(t)?t:(t+"").replace(/\s+/g,"").split(",")};var i=function(){function t(){this.instances={},this.bindings={},this.tags={},this.resolved={},this.extenders={},this.middlewares={}}return t.prototype.get=function(t){},t.prototype.has=function(t){return this.instances.hasOwnProperty(t)||this.bindings.hasOwnProperty(t)},t.prototype.instance=function(t,e){var r="function"==typeof e?e.call({}):e;return this.instances[t]=r,r},t.prototype.singleton=function(t,e){this.bind(t,e,!0)},t.prototype.bind=function(t,e,r){void 0===r&&(r=!1),delete this.instances[t],this.bindings[t]={factory:e,singleton:r},this.isResolved(t)&&this.rebound(t)},t.prototype.extend=function(t,e){t in this.instances?this.instances[t]=e(this.instances[t],this):(this.extenders.hasOwnProperty(t)||(this.extenders[t]=[]),this.extenders[t].push(e),this.isResolved(t)&&this.rebound(t))},t.prototype.middleware=function(t,e){return"function"==typeof t&&(e=t,t="__GLOBAL"),this.middlewares||(this.middlewares[t]=[]),this.middlewares[t].push(e),this},t.prototype.tag=function(t,e){var r=this,n=[];if(e instanceof Array)n=e;else for(var i=1;arguments.length>i;i++)n[i-1]=arguments[i];n.forEach((function(e){e in r.tags||(r.tags[e]=[]),t instanceof Array?t.forEach((function(t){r.tags[e].push(t)})):r.tags[e].push(t)}))},t.prototype.make=function(t){for(var e=this,i=[],o=1;arguments.length>o;o++)i[o-1]=arguments[o];return new Promise((function(o,s){var c=n(t);try{e.resolve.apply(e,r([c,function(){if(Array.isArray(t)||c.length>1){for(var e=[],r=0;c.length>r;r++)e.push(arguments[r]);o(e)}else o(arguments[0])}],i))}catch(t){s(t)}}))},t.prototype.resolve=function(t,e,r){var i=this;void 0===r&&(r=[]);var o=n(t).map((function(t){if(t in i.instances)return i.instances[t];var e=i.build(t,r);return i.getExtenders(t).forEach((function(t){e=t(e,i)})),function(t,e){if(t.length){var r=0,n=function(i){if(i)throw i;t[r]&&t[r++].call(null,e,n)};n()}}(i.getMiddlewares(t),e),i.isSingleton(t)&&(i.instances[t]=e),i.resolved[t]=!0,e}));e.apply(null,o)},t.prototype.isResolved=function(t){return this.resolved.hasOwnProperty(t)||this.instances.hasOwnProperty(t)},t.prototype.isSingleton=function(t){return this.instances.hasOwnProperty(t)||!!this.bindings[t].singleton},t.prototype.destroy=function(){this.instances={},this.tags={},this.bindings={},this.resolved={},this.extenders={}},t.prototype.rebound=function(t){this.make(t)},t.prototype.build=function(t,e){if(void 0===e&&(e=[]),!this.bindings.hasOwnProperty(t))throw Error("Service "+t+" is not exists.");return this.bindings[t].factory.apply(null,e)},t.prototype.getExtenders=function(t){return this.extenders[t]||[]},t.prototype.getMiddlewares=function(t){return this.middlewares[t]||[]},t}();var o=function(){function t(){this.listeners={}}return t.prototype.dispatch=function(t,e){t in this.listeners&&this.callListeners(this.listeners[t],t,e);return this},t.prototype.emit=function(t){for(var e=[],r=1;arguments.length>r;r++)e[r-1]=arguments[r];return this.dispatch(t,e)},t.prototype.on=function(t,e,r){return void 0===r&&(r=!1),this.addListener(t,e,r)},t.prototype.once=function(t,e){return this.addListener(t,e,!0)},t.prototype.off=function(t,e){return e?this.removeListener(t,e):this},t.prototype.addListener=function(t,e,r){return void 0===r&&(r=!1),this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({listener:e,once:r}),this},t.prototype.removeListener=function(t,e){var r=this.listeners[t];if(!r||0===r.length)return this;var n=function(t,e){for(var r=t.length;r--;)if(t[r].listener===e)return r;return-1}(r,e);return-1!==n&&r.splice(n,1),this},t.prototype.removeListeners=function(t,e){return t&&this.listeners[t]?this.listeners[t]=e?this.listeners[t].filter((function(t){return-1===e.indexOf(t.listener)})):[]:this.listeners={},this},t.prototype.hasListeners=function(t){return t?this.listeners[t].length>0:!!Object.keys(this.listeners).find((function(t){return!!t}))},t.prototype.getListeners=function(t){return t?this.listeners[t]||[]:this.listeners},t.prototype.callListeners=function(t,e,r){var n=this,i=function(){for(var o,s,c=+new Date;(o=t.shift())&&(o.once&&n.removeListener(e,o.listener),!1!==(s=o.listener.apply(n,r||[]))&&25>=+new Date-c););!1!==s&&o&&setTimeout(i)};i()},t}(),s=function(t){function r(e){void 0===e&&(e=!1);var r=t.call(this)||this;return r.serviceProviders=[],r.booted=!1,r.debug=!!e,r.dispatcher=new o,r.registerBaseServiceProvider(),r}return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(r,t),r.prototype.boot=function(){var t=this;return this.booted?Promise.resolve(!0):(this.resolveProviderRegister(),this.serviceProviders.forEach((function(e){t.bootProvider(e.provider)})),this.startTime=new Date,this.booted=!0,console.log((new Date).toLocaleTimeString(),"Kernel Booted"),Promise.resolve(!0))},r.prototype.register=function(t,e){void 0===e&&(e={});var r="object"==typeof t?t:new t(this,e.args);return this.serviceProviders.push({provider:r,options:e}),this.booted&&(r.register(),this.bootProvider(r)),r},r.prototype.destroy=function(){this.serviceProviders.forEach((function(t){return t.provider.destroy()})),this.serviceProviders=[],t.prototype.destroy.call(this)},r.prototype.isBooted=function(){return this.booted},r.prototype.registerBaseServiceProvider=function(){console.warn("registerBaseServerProvider method is deprecated.")},r.prototype.resolveProviderRegister=function(){this.serviceProviders.forEach((function(t){t.provider.register()}))},r.prototype.bootProvider=function(t){t.boot()},r.prototype.initBundles=function(){},r.VERSION="1.0.0",r.VERSION_ID=1e4,r}(i);Object.freeze(s);var c=function(){function t(t,e){void 0===e&&(e={}),this.kernel=t,this.options=e,this.kernel=t}return t.prototype.provides=function(){return[]},t.prototype.destroy=function(){this.kernel=null},t}();t.Kernel=s,t.ServiceProvider=c,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=rain.min.js.map
